<!--5th April @ 2021-->
<mat-dialog-content class="mat-typography">
    <app-rfq-modal-product-description [rfqDetailData]="details"></app-rfq-modal-product-description>
    <!--message relay-->
    <mat-accordion *ngFor="let quote of details.quotation;let i=index">
        <mat-expansion-panel expanded="false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <p><span class="prod-head">Date: </span> <span class="prod-desc"> {{formatDate(quote.message_date)}}
                            | Time: {{formatTime(quote.message_date)}}</span></p>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <p><span class="prod-head">Quantity: </span><span class="prod-desc">{{quote.quantity}}</span></p>
            <p><span class="prod-head">Message: </span><span class="prod-desc">{{quote.message}}</span></p>
        </mat-expansion-panel>
    </mat-accordion>

    <!--form for quotation-->
    <div class="quote-form container">
        <form [formGroup]="quoteData" (ngSubmit)="onClickSubmit(quoteData.value)" class="mt-4">
            <div class="row">
                <!--INPUT FOR PRODUCT QUANTITY-->
                <div class="col-md-6 col-lg-4">
                    <div class="form-group">
                        <label class="form-label" for="prodQuantity">Product Quantity</label>
                        <input formControlName="quantity" id="prodQuantity" class="form-control form-control-md"
                            type="prodQuantity" required />
                        <!--ERROR CHECK-->
                        <div *ngIf="quantity.invalid && (quantity.dirty || quantity.touched)" class="align-left">
                            <div *ngIf="quantity.errors?.required" class="align-left">
                                <app-form-input-alert [alertMsg]="'Product quantity is required (digits only).'">
                                </app-form-input-alert>
                            </div>
                        </div>
                    </div>
                </div>
                <!--INPUT FOR UNIT PRICE-->
                <div class="col-md-6 col-lg-4">
                    <div class="form-group">
                        <label for="unitPrice" class="form-label">Unit Price</label>
                        <input id="unitPrice" formControlName="unit_price" class="form-control form-control-md"
                            type="unitPrice" required />
                        <!--ERROR CHECK-->
                        <div *ngIf="unit_price.invalid && (unit_price.dirty || unit_price.touched)" class="align-left">
                            <div *ngIf="unit_price.errors?.required">
                                <app-form-input-alert [alertMsg]="'Unit Price is required (digits only).'">
                                </app-form-input-alert>
                            </div>
                        </div>
                    </div>
                </div>
                <!--INPUT FOR TOTAL PRICE-->
                <div class="col-md-6 col-lg-4">
                    <div class="form-group">
                        <label for="totalPrice" class="form-label">Total Price</label>
                        <input formControlName="total_price" id="totalPrice" class="form-control form-control-md"
                            type="totalPrice" required />
                        <!-- ERROR CHECK -->
                        <div *ngIf="total_price.invalid && (total_price.dirty || total_price.touched)"
                            class="align-left">
                            <div *ngIf="total_price.errors?.required">
                                <app-form-input-alert [alertMsg]="'Total Price is required (digits only).'">
                                </app-form-input-alert>
                            </div>
                        </div>
                    </div>
                </div>
                <!--ATTACHMENTS-->
                <div class="col-md-12">
                    <!--label show and warning message show-->
                    <div class="form-group">
                        <div class="file-warn">
                            <label class="file-label d-block">Quotation Attachments:</label>
<!-- 
                           
                                <app-form-input-alert [alertMsg]="'You can attach maximum two files'"
                                    class="align-left">
                                </app-form-input-alert> -->
                            
                        </div>
                        <!--FILE UPLOAD-->
                        <label for="attachments" class="custom-file-upload float-left mr-2">
                            <input id="attachments" class="form-control" type="file" formControlName="attachments"
                                (change)="handleFileSelect($event);" />
                        </label>
                        <!--Attached file show-->
                        <ul class="attached-file">
                            <li *ngFor="let file of selectedImage; let i = index;">
                                {{file.name}}
                                <button mat-mini-fab (click)="removeFile(i);">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- SUBMIT BUTTON-->
                <div class="col-md-12">
                    <div class="form-group mobile-show mt-3">
                        <button type="submit" mat-raised-button class="btn btn-primary btn-md login_btn"
                            mat-dialog-close [disabled]="quoteData.invalid">
                            Resubmit
                        </button>
                    </div>
                </div>

            </div>
        </form>
    </div>
</mat-dialog-content>

<ngx-spinner></ngx-spinner>